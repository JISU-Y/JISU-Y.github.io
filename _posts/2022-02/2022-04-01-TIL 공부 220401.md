---
layout: single
title: "[TIL] rollup 학습"
categories: TIL
tag: [TIL, rollup]
toc: true
author_profile: true
sidebar:
  nav: "docs"
---

# TIL

**입사 전 추가 공부**

## 번들러

### Rollup

#### 구현

```jsx
// src/math.js
export const add = (a, b) => a + b;
export const substract = (a, b) => a - b;
```

```jsx
// src/index.js
import { add, substract } from "./math";

const sum = add(3, 4);

export { sum }; // 이 모듈을 사용할 때 외부에서는 이 sum 값을 사용하게 되는 것이다.
```

module 화 내보내기?

```
./node_modules/.bin/rollup src/index.js -d lib
```

lib 폴더에 index.js 생성

```jsx
// lib/index.js
const add = (a, b) => a + b;

const sum = add(3, 4);

export { sum };
```

src index.js에서 substract를 import 했지만 모듈에서는 나오지 않는 것을 확인할 수 있다.

export 값에 사용이 되지 않았기 때문?

```jsx
const a = 4;
```

src index.js에 뜬금없이 이 코드를 추가해도 번들 이후 나오지 않는 것을 확인할 수 있다.

이를 나무흔들기(tree shaking)라고 한다.

#### rollup config

보통 json 말고 js로 사용한다.

```jsx
const config = {
  input: "src/index.js",
  output: {
    file: "lib/index.js",
    format: "", // iife // immedietly invokable function expression // 즉시 호출 가능한 함수 표현
    name: "RollupTest", // 외부에서 참조할 이름 필요
  },
};

export default config;
```

이렇게 설정하고 config 설정으로 번들링 하라는 명령어

```
./node_modules/.bin/rollup -c
```

를 하면 다음과 같이 번들링이 된다.

```jsx
var RollupTest = (function (exports) {
  "use strict";

  const add = (a, b) => a + b;

  const sum = add(3, 4);

  exports.sum = sum;

  Object.defineProperty(exports, "__esModule", { value: true });

  return exports;
})({});
```

이런 식으로 RollupTest라는 이름으로 즉시 함수 표현이 만들어지고,  
외부에서는 RollupTest라는 함수를 사용할 수 있도록 번들링된다.

## 회고 (TIL)

**2022.04.01 Daily 회고**

✏오늘 한 일

- 입사 전 추가 공부
  - rollup

⁉느낀 점

입사하게 될 회사에서 공통 모듈로 rollup을 사용한다고 했기 때문에 rollup에 대해서 좀 더 공부해보았다.

느낌적인 느낌으로 webpack보다 간단한? 느낌이 든다..

🎃현재 나의 상태

<hr>
